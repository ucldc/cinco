# README

* Ruby version

ruby 3.2
rails 7.2

* System dependencies

* Configuration

* Database creation

* Database initialization

* How to run the test suite

* Services (job queues, cache servers, search engines, etc.)

* Deployment instructions

* Indexing

To run the indexer with our customizations use the following command from the arclight root:

```
bundle exec traject -I lib/ -u http://<solr_url>:8983/solr/blacklight-core -i xml -c lib/arclight/traject/ead2_config.rb path/to/file.xml
```
** Settings
Settings can be added to the index command with `-s name=value`

`preview` - if an item is being previewed rather than published set to "true" `-s preview=true` (default: false)
`ark` - set to the ark generated by cincoctrl, this will be the url of the item in arclight `-s ark=xxXXXXXX`

** Environment variables
`REPOSITORY_ID` - Must be set to Repository.code (from cincoctrl) to add to a repository in arclight (no default)
`TEXT_FILE_NAME` - May be set to change the name of the the file that contains extracted text (default: `extracted-supplementary-files-text.txt`)
`TEXT_FILE_DIR` - May be set to change the directory where the text file is located (default: same directory as the XML)
